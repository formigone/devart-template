<!doctype html>
<html>
<!--
Copyright 2014 Rodrigo Silveira. All Rights Reserved.

-->
<head>
    <title>IDynamics Unit Tests - app.Simulation</title>
    <script src="/lib/closure/goog/base.js"></script>
    <script src="/deps.js"></script>
    <script>
        goog.require('app.Simulation');
        goog.require('goog.testing.jsunit');
    </script>
</head>
<body>
<script>

    function test_Simulation_NoConstructorArgs_EmptyConstructorWorks() {
        var sim = new app.Simulation();

        assertTrue("Simulation obj should be created with no constructor args", sim instanceof app.Simulation)
    }

    function test_Simulation_NoFPSProvided_DefaultFPSIsPositiveSoViewRefreshes() {
        var sim = new app.Simulation();
        var res = sim.fps > 0;

        assertTrue("FPS should be by default positive integer", res)
    }

    function test_Simulation_OnInitCallbackProvided_OnInitCallBackIsCalled() {
        var MockCb = function () {
            var called = 0;

            this.getTotal = function () {
                return called;
            };

            this.init = function () {
                called += 1;
            };
        };

        var mock = new MockCb();
        var data = {
            onInit: mock.init
        };

        var sim = new app.Simulation(data);

        assertEquals("OnInit should have been called once", 1, mock.getTotal());
    }
</script>
</body>
</html>
